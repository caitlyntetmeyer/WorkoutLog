{"version":3,"sources":["app.js","auth/signin.js","auth/signup.js","auth/userlinks.js","define/define.js","history/history.js","logs/logs.js","authinterceptor.js","currentuser.js","define.service.js","logs.service.js","sessiontoken.js","users.service.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bundle.js","sourcesContent":["(function() {\n\tvar app = angular.module('workoutlog', [\n\t\t// Inject dependencies:\n\t\t'ui.router',\n\t\t'workoutlog.define',\n\t\t'workoutlog.logs',\n\t\t'workoutlog.history',\n\t\t'workoutlog.feed',\n\t\t'workoutlog.auth.signup',\n\t\t'workoutlog.auth.signin'\n\t\t])\n\t.factory('socket', function(socketFactory){\n\t\tvar myIoSocket = io.connect('http://localhost:3000');\n\n\t\tvar socket = socketFactory({\n\t\t\tioSocket: myIoSocket\n\t\t});\n\t\treturn socket;\n\t});\n\n\tfunction config($urlRouterProvider) {\n\t\t$urlRouterProvider.otherwise('/signin');\n\t}\n\n\tconfig.$inject = [ '$urlRouterProvider' ];\n\tapp.config(config);\n\n\tvar API_BASE = location.hostname === \"localhost\" ? \"//localhost:3000/api/\" : \"//cct-workoutlogangular.herokuapp.com/api/\";\n\t// var API_BASE is now dynamic, and WorkoutLog-Angular can run deployed or locally because the ternary operator (?) determines the environment and alters the API_BASE accordingly.\n\tapp.constant('API_BASE', API_BASE);\n})();\n","// Signing in a User\n(function(){\n\tangular\n\t\t.module('workoutlog.auth.signin', ['ui.router'])\n\t\t.config(signinConfig);\n\n\t\tfunction signinConfig($stateProvider) {\n\t\t\t$stateProvider\n\t\t\t\t.state('signin', {\n\t\t\t\t\turl: '/signin',\n\t\t\t\t\ttemplateUrl: '/components/auth/signin.html',\n\t\t\t\t\tcontroller: SignInController,\n\t\t\t\t\tcontrollerAs: 'ctrl',\n\t\t\t\t\tbindToController: this\n\t\t\t\t});\n\t\t}\n\n\t\tsigninConfig.$inject = ['$stateProvider'];\n\n\t\t// UsersService is used throughout this application to gather or create data regarding a user:\n\t\tfunction SignInController($state, UsersService) { // The signin component uses $state and UsersService as dependencies.\n\t\t\tvar vm = this;\n\t\t\t// The following line allows the controller to create a new user based upon the inputs from signin.html:\n\t\t\tvm.user = {};\n\t\t\tvm.login = function() {\n\t\t\t\tUsersService.login(vm.user).then(function(response){\n\t\t\t\t\tconsole.log(response);\n\t\t\t\t\t$state.go('define');\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\n\t\tSignInController.$inject = ['$state', \"UsersService\"];\n})(); // This is an IIFE.\n","// This configuration (config) file is found in a single file to keep the components together.\n// The config and controller for each feature will use the .$inject directive from Angular to inject dependencies.\n(function(){\n\tangular\n\t\t.module('workoutlog.auth.signup', ['ui.router'])\n\t\t.config(signupConfig);\n\n\t\tfunction signupConfig($stateProvider) { \n\t\t// $stateProvider is from ui-router and is the method through which url routing is handled.\n\t\t\t$stateProvider\n\t\t\t\t.state('signup', {\n\t\t\t\t\turl: '/signup',\n\t\t\t\t\t// defines this component as the state of signup and provides the url route\n\t\t\t\t\ttemplateUrl: '/components/auth/signup.html',\n\t\t\t\t\t// templateUrl is the html the component will use\n\t\t\t\t\tcontroller: SignUpController,\n\t\t\t\t\t// controller indicates which controller will dictate the behavior of this view\n\t\t\t\t\tcontrollerAs: 'ctrl',\n\t\t\t\t\t// controllerAs creates an alias so a developer doesn’t have to type SignUpController.<function or object>\n\t\t\t\t\tbindToController: this\n\t\t\t\t\t// bindToController binds the scope of the view to the scope of this controller and eliminates the need to use $scope\n\t\t\t\t});\n\t\t}\n\n\t\tsignupConfig.$inject = ['$stateProvider'];\n\n\t\tfunction SignUpController($state, UsersService) {\n\t\t\tvar vm = this;\n\t\t\t// \"var vm = this\" is how the binding of the controller to the view is completed.\n\t\t\tvm.user = {};\n\t\t\t// \"vm.user = {}\" establishes an object to build the username and password inside.\n\t\t\tvm.message = \"Sign up for an account!\"\n\t\t\t// example of expressions and how vm and this scope work together\n\t\t\tvm.submit = function() {\n\t\t\t\tUsersService.create(vm.user)\n\t\t\t\t\t.then(function(response){\n\t\t\t\t// \"ng-model\" and \"ng-submit\" (not in this file) create the vm.user object that \"UserService.create\" uses to sign a new user up.\n\t\t\t\t// The .then is how the SignUpController handles the resolved promise and then routes the app to the \"define\" feature of the WorkoutLog.\n\t\t\t\t\tconsole.log(response); // displays response data in console\n\t\t\t\t\t$state.go('define');\n\t\t\t\t\t// $state.go(‘define’) is how ui-route changes from state (url) to other states.\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\n\t\tSignUpController.$inject = ['$state', 'UsersService'];\n\t\t// SignUpController has $state and UsersService injected into it.\n})();\n","// This file will \"power\" the custom directive.\n(function() {\n\tangular.module('workoutlog')\n\t.directive('userlinks',\n\t\tfunction() {\n\t\t\tUserLinksController.$inject = [ '$state', 'CurrentUser', 'SessionToken' ];\n\t\t\tfunction UserLinksController($state, CurrentUser, SessionToken) {\n\t\t\t\tvar vm = this;\n\t\t\t\tvm.user = function() {\n\t\t\t\t\treturn CurrentUser.get();\n\t\t\t\t};\n\n\t\t\t\tvm.signedIn = function() {\n\t\t\t\t\treturn !!(vm.user().id);\n\t\t\t\t};\n\n\t\t\t\tvm.logout = function() {\n\t\t\t\t\tCurrentUser.clear();\n\t\t\t\t\tSessionToken.clear();\n\t\t\t\t\t$state.go('signin');\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Configure the directive:\n\t\t\treturn {\n\t\t\t\t// Create an isolated scope to isolate the data to a portion of the application:\n\t\t\t\tscope: {},\n\t\t\t\tcontroller: UserLinksController,\n\t\t\t\tcontrollerAs: 'ctrl',\n\t\t\t\tbindToController: true,\n\t\t\t\ttemplateUrl: '/components/auth/userlinks.html'\n\t\t\t};\n\t\t});\n})();\n","(function() {\n\tangular.module('workoutlog.define', [\n\t\t'ui.router'\n\t\t])\n\t.config(defineConfig);\n\n\tfunction defineConfig($stateProvider) {\n\n\t\t$stateProvider\n\t\t\t.state('define', {\n\t\t\t\turl: '/define',\n\t\t\t\ttemplateUrl: '/components/define/define.html',\n\t\t\t\tcontroller: DefineController,\n\t\t\t\tcontrollerAs: 'ctrl',\n\t\t\t\tbindToController: this,\n\t\t\t\t// Resolve is built in to Angular as a function that executes code prior to going to that route:\n\t\t\t\tresolve: [\n\t\t\t\t\t// Run functions to ensure that a user's actually logged in:\n\t\t\t\t\t'CurrentUser', '$q', '$state',\n\t\t\t\t\t// Above line: 3 things are injected. $q is Angular's way to build custom promises.\n\t\t\t\t\tfunction(CurrentUser, $q, $state){\n\t\t\t\t\t\tvar deferred = $q.defer();\n\t\t\t\t\t\tif (CurrentUser.isSignedIn()){\n\t\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdeferred.reject();\n\t\t\t\t\t\t\t$state.go('signin');\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn deferred.promise;\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});\n\t}\n\n\tdefineConfig.$inject = [ '$stateProvider' ];\n\n\tfunction DefineController( $state, DefineService ) {\n\t\tvar vm = this;\n\t\tvm.message = \"Define a new workout type, such as running, swimming, or doing dumbbell bicep curls.\";\n\t\tvm.saved = false;\n\t\tvm.definition = {};\n\t\tvm.save = function() {\n\t\t\tDefineService.save(vm.definition)\n\t\t\t\t.then(function(){\n\t\t\t\t\tvm.saved = true;\n\t\t\t\t\t$state.go('logs')\n\t\t\t\t});\n\t\t};\n\n\t}\n\tDefineController.$inject = ['$state', 'DefineService'];\n})();\n","// LogsService is injected and then implemented in this controller.  \n// The history component is used to present the collection of logs.  \n// Look inside vm.updateLog. $state.go has the route as the first argument, but the second argument is an object with an id property. This is how logs.js knows which log to get so it can be updated.\n(function(){\n\tangular.module('workoutlog.history', [\n'ui.router'\n\t\t])\n\t.config(historyConfig);\n\n\t// Inject stuff:\n\thistoryConfig.$inject = ['$stateProvider'];\n\tfunction historyConfig($stateProvider) {\n\n\t\t$stateProvider\n\t\t.state('history', {\n\t\t\turl: '/history',\n\t\t\ttemplateUrl: '/components/history/history.html',\n\t\t\tcontroller: HistoryController,\n\t\t\tcontrollerAs: 'ctrl',\n\t\t\tbindToController: this,\n\t\t\tresolve: {\n\t\t\t\tgetUserLogs: [\n\t\t\t\t'LogsService',\n\t\t\t\tfunction(LogsService) {\n\t\t\t\t\treturn LogsService.fetch();\n\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\t}\n\n\tHistoryController.$inject = ['$state', 'LogsService'];\n\tfunction HistoryController($state, LogsService) {\n\t\tvar vm = this;\n\t\tvm.history = LogsService.getLogs();\n\n\t\tvm.delete = function(item) {\n\t\t\tLogsService.deleteLogs(item);\n\t\t};\n// Inside vm.updateLog, $state.go has the route as the first argument, but the second argument is an object with an id property. This is how logs.js knows which log to get so it can be updated.\n\t\tvm.updateLog = function(item) {\n\t\t\t$state.go('logs/update', { 'id': item.id });\n\t\t};\n\t}\n})();\n","(function(){\n\tangular.module('workoutlog.logs', [\n\t\t'ui.router'\n\t\t])\n\t.config(logsConfig);\n\n\tlogsConfig.$inject = ['$stateProvider'];\n\tfunction logsConfig($stateProvider) {\n\n\t\t$stateProvider\n\t\t\t.state('logs', {\n\t\t\t\turl: '/logs',\n\t\t\t\ttemplateUrl: '/components/logs/logs.html',\n\t\t\t\tcontroller: LogsController,\n\t\t\t\tcontrollerAs: 'ctrl',\n\t\t\t\tbindToController: this,\n\t\t\t\tresolve: {\n\t\t\t\t\tgetUserDefinitions: [\n\t\t\t\t\t'DefineService',\n\t\t\t\t\tfunction(DefineService) {\n\t\t\t\t\t\treturn DefineService.fetch();\n\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t})\n// $stateParams.id (line 36) allows the application to pass the url and use that as a way to identify an individual workout. Notice the '/:id' in the .state('logs/update' (line 28). This is the variable that is passed to $stateParams.id.\n\t\t\t.state('logs/update', {\n\t\t\t\turl: '/logs/:id',\n\t\t\t\ttemplateUrl: '/components/logs/log-update.html',\n\t\t\t\tcontroller: LogsController,\n\t\t\t\tcontrollerAs: 'ctrl',\n\t\t\t\tbindToController: this,\n// The two functions in the resolve (below) allow the route to have access to the data of the log being edited. The resolve is getting ALL user definitions of a workout.\n\t\t\t\tresolve: {\n\t\t\t\t\tgetSingleLog: function($stateParams, LogsService) {\n// $stateParams.id (line 36) allows the application to pass the url and use that as a way to identify an individual workout. Notice the '/:id' in the .state('logs/update' (line 28). This is the variable that is passed to $stateParams.id.\n\t\t\t\t\t\treturn LogsService.fetchOne($stateParams.id);\n\t\t\t\t\t},\n\n\t\t\t\t\tgetUserDefinitions: function(DefineService) {\n\t\t\t\t\t\treturn DefineService.fetch();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tLogsController.$inject = ['$state', 'DefineService', 'LogsService'];\n\tfunction LogsController($state, DefineService, LogsService) {\n\t\tvar vm = this;\n\t\tvm.saved = false;\n\t\tvm.log = {};\n\t\tvm.userDefinitions = DefineService.getDefinitions();\n\t\tvm.updateLog = LogsService.getLog();\n\t\tvm.save = function() {\n\t\t\tLogsService.save(vm.log)\n\t\t\t.then(function(){\n\t\t\t\tvm.saved = true;\n\t\t\t\t$state.go('history');\n\t\t\t});\n\t\t};\n\n\t\t// Create an update function here\n\t\tvm.updateSingleLog = function() {\n\t\t\tvar logToUpdate = {\n\t\t\t\tid: vm.updateLog.id,\n\t\t\t\tdesc: vm.updateLog.description,\n\t\t\t\tresult: vm.updateLog.result,\n\t\t\t\tdef: vm.updateLog.def \n\t\t\t}\n\t\t\tLogsService.updateLog(logToUpdate)\n\t\t\t.then(function() {\n\t\t\t\t$state.go('history');\n\t\t\t});\n\t\t};\n\t}\n})();\n","(function(){\n\tangular.module('workoutlog')\n\t\t.factory('AuthInterceptor', ['SessionToken', 'API_BASE',\n\t\t\tfunction(SessionToken, API_BASE) {\n\t\t\t\treturn {\n\t\t\t\t\trequest: function(config) {\n\t\t\t\t\t\tvar token = SessionToken.get();\n\t\t\t\t\t\tif (token && config.url.indexOf(API_BASE) > -1) {\n\t\t\t\t\t\t\tconfig.headers['Authorization'] = token;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn config;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}]);\n\n\t\tangular.module('workoutlog')\n\t\t\t.config(['$httpProvider', function($httpProvider) {\n\t\t\t\treturn $httpProvider.interceptors.push('AuthInterceptor');\n\t\t\t}]);\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","(function() {\n\tangular.module('workoutlog')\n\t\t.service('CurrentUser', [ '$window', function($window) {\n\t\t\tfunction CurrentUser() { // declaring the CurrentUser\n\t\t\t\tvar currUser = $window.localStorage.getItem('currentUser');\n\t\t\t\t// Check if there's a currUser. If so, and if the currUser is undefined, set the currentUser:\n\t\t\t\tif (currUser && currUser !== \"undefined\") { \n\t\t\t\t\tthis.currentUser = JSON.parse($window.localStorage.getItem('currentUser'));\n\t\t\t\t}\n\t\t\t}\n\t\t\tCurrentUser.prototype.set = function(user) { // attaching further functionality onto the prototype chain\n\t\t\t\tthis.currentUser = user;\n\t\t\t\t$window.localStorage.setItem('currentUser', JSON.stringify(user));\n\t\t\t};\n\t\t\tCurrentUser.prototype.get = function() { // attaching further functionality onto the prototype chain\n\t\t\t\treturn this.currentUser || {};\n\t\t\t};\n\t\t\tCurrentUser.prototype.clear = function() { // attaching further functionality onto the prototype chain\n\t\t\t\tthis.currentUser = undefined;\n\t\t\t\t$window.localStorage.removeItem('currentUser');\n\t\t\t};\n\t\t\tCurrentUser.prototype.isSignedIn = function() { // attaching further functionality onto the prototype chain\n\t\t\t\treturn !!this.get().id; // The !! ensures that isSignedIn flips the boolean correctly.\n\t\t\t};\n\t\t\treturn new CurrentUser();\n\t\t}]);\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","(function(){\n\t// Connect the service to our application:\n\tangular.module('workoutlog')\n\t\t.service('DefineService', DefineService);\n\n\t\t// Inject $http and API_BASE:\n\t\tDefineService.$inject = ['$http', 'API_BASE'];\n\t\tfunction DefineService($http, API_BASE) {\n\t\t\tvar defineService = this;\n\t\t\tdefineService.userDefinitions = [];\n\n\t\t\tdefineService.save = function(definition) {\n\t\t\t\treturn $http.post(API_BASE + 'definition', {\n\t\t\t\t\tdefinition: definition\n\n\t\t\t\t}).then(function(response){\n\t\t\t\t\tdefineService.userDefinitions.unshift(response.data);\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tdefineService.fetch = function(definition) {\n\t\t\t\treturn $http.get(API_BASE + 'definition')\n\t\t\t\t\t.then(function(response){\n\t\t\t\t\t\tdefineService.userDefinitions = response.data;\n\t\t\t\t\t});\n\t\t\t};\n\n\t\t\tdefineService.getDefinitions = function() {\n\t\t\t\treturn defineService.userDefinitions;\n\t\t\t};\n\t\t}\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","// 1. Create the service\n// 2. Inject the service into the controller\n// 3. Create the views needed for the controller\n// 4. Update app.js (or the configuration file)\n\n(function(){\n\tangular.module('workoutlog')\n\t\t// 1. Create the service\n\t\t.service('LogsService', LogsService);\n\n\t\t// 2. Inject the service into the controller\n\t\tLogsService.$inject = ['$http', 'API_BASE'];\n\t\tfunction LogsService($http, API_BASE, DefineService) {\n\t\t\tvar logsService = this;\n\t\t\t// Next 2 lines are used to expose data to the rest of the application:\n\t\t\tlogsService.workouts = [];\n\t\t\tlogsService.individualLog = {};\n\t\t\t// Save the log:\n\t\t\tlogsService.save = function(log) {\n\t\t\t\treturn $http.post(API_BASE + 'log', {\n\t\t\t\t\tlog: log\n\t\t\t\t}).then(function(response){\n\t\t\t\t\tlogsService.workouts.push(response);\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tlogsService.fetch = function(log) {\n\t\t\t\treturn $http.get(API_BASE + 'log')\n\t\t\t\t\t.then(function(response){\n\t\t\t\t\t\tlogsService.workouts = response.data;\n\t\t\t\t\t});\n\t\t\t};\n\t\t\t// .getLogs returns data types so they can be used in multiple controllers:\n\t\t\tlogsService.getLogs = function() {\n\t\t\t\treturn logsService.workouts;\n\t\t\t};\n\n\t\t\tlogsService.deleteLogs = function(log) {\n\t\t\t\tvar logIndex = logsService.workouts.indexOf(log);\n\t\t\t\tlogsService.workouts.splice(logIndex, 1);\n\t\t\t\tvar deleteData = {log: log};\n\t\t\t\treturn $http({\n\t\t\t\t\tmethod: 'DELETE',\n\t\t\t\t\turl: API_BASE + \"log\",\n\t\t\t\t\tdata: JSON.stringify(deleteData),\n\t\t\t\t\theaders: {\"Content-Type\": \"application/json\"}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tlogsService.fetchOne = function(log) {\n\t\t\t\t// console.log(log);\n\t\t\t\treturn $http.get(API_BASE + 'log/' + log)\n\t\t\t\t\t.then(function(response) {\n\t\t\t\t\tlogsService.individualLog = response.data;\n\t\t\t\t});\n\t\t\t};\n\t\t\t// .getLog returns data types so they can be used in multiple controllers:\n\t\t\tlogsService.getLog = function() {\n\t\t\t\treturn logsService.individualLog;\n\t\t\t};\n\n\t\t\tlogsService.updateLog = function(logToUpdate) {\n\t\t\t\treturn $http.put(API_BASE + 'log', { log: logToUpdate });\n\t\t\t}\n\t\t}\n})();\n","(function(){\n\tangular.module('workoutlog')\n\t\t.service('SessionToken', ['$window', function($window) {\n\t\t\tfunction SessionToken(){\n\t\t\t// declares and defines SessionToken\n\t\t\t\tthis.sessionToken = $window.localStorage.getItem('sessionToken');\n\t\t\t}\n\n\t\t\tSessionToken.prototype.set = function(token){\n\t\t\t// uses the .prototype to attach the function .set to the prototype chain; this has memory enhancements and follows conventional design patterns\n\t\t\t\tthis.sessionToken = token;\n\t\t\t\t$window.localStorage.setItem('sessionToken', token);\n\t\t\t};\n\n\t\t\tSessionToken.prototype.get = function(){\n\t\t\t// uses the .prototype to attach the function .get to the prototype chain; this has memory enhancements and follows conventional design patterns\n\t\t\t\treturn this.sessionToken;\n\t\t\t};\n\n\t\t\tSessionToken.prototype.clear = function() {\n\t\t\t// uses the .prototype to attach the function .clear to the prototype chain; this has memory enhancements and follows conventional design patterns\n\t\t\t\tthis.sessionToken = undefined;\n\t\t\t\t$window.localStorage.removeItem('sessionToken');\n\t\t\t};\n\t\t\treturn new SessionToken;\n\t\t}]);\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","// This file handles the http request to create and/or sign in a user.\n// Implements the design pattern Dependency Injection (DI)\n(function(){\n\tangular.module('workoutlog')\n\t\t.service('UsersService', [\n\t\t\t'$http', 'API_BASE', 'SessionToken', 'CurrentUser',\n\t\t\tfunction($http, API_BASE, SessionToken, CurrentUser) {\n\t\t\t\tfunction UsersService(){\n\n\t\t\t\t}\n\n\t\t\t\tUsersService.prototype.create = function(user) {\n\t\t\t\t\tvar userPromise = $http.post(API_BASE + 'user', {\n\t\t\t\t\t\tuser: user\n\t\t\t\t\t});\n\n\t\t\t\t\tuserPromise.then(function(response){\n\t\t\t\t\t\tSessionToken.set(response.data.sessionToken);\n\t\t\t\t\t\tCurrentUser.set(response.data.user);\n\t\t\t\t\t});\n\t\t\t\t\treturn userPromise;\n\t\t\t\t};\n\n\t\t\t\tUsersService.prototype.login = function(user) {\n\t\t\t\t\tvar loginPromise = $http.post(API_BASE + 'login',{\n\t\t\t\t\t\tuser: user\n\t\t\t\t\t});\n\n\t\t\t\t\tloginPromise.then(function(response){\n\t\t\t\t\t\tSessionToken.set(response.data.sessionToken);\n\t\t\t\t\t\tCurrentUser.set(response.data.user);\n\t\t\t\t\t});\n\t\t\t\t\treturn loginPromise;\n\t\t\t\t};\n\t\t\t\treturn new UsersService();\n\t\t\t}]);\n})();\n"]}